<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin - Banco Domande</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav class="top-nav">
      <a href="exam-builder.html" class="nav-link">Tracce</a>
      <a href="admin.html" class="nav-link active">Admin</a>
      <a href="index.html" class="nav-link">Registro</a>
      <a href="dashboard.html" class="nav-link">Analisi</a>
    </nav>
    <div class="bg-orbit"></div>
    <div class="bg-grid"></div>

    <!-- <header class="hero py-4">
      <div class="brand container">
        <div class="badge">FA</div>
        <div>
          <p class="overline mb-1">C3LAB â€¢ Fondamenti di Automatica</p>
          <h1 class="h2 mb-0">Admin Banco Domande</h1>
          <p class="subtitle">Gestisci corsi, argomenti e domande riutilizzabili.</p>
        </div>
      </div>
    </header> -->

    <main class="layout container-fluid admin-layout py-4">
      <div class="admin-actions">
        <button class="btn btn-outline-primary" type="button" id="toggleCourses">Gestisci corsi</button>
        <button class="btn btn-outline-primary" type="button" id="toggleTopics">Gestisci argomenti</button>
        <button class="btn btn-outline-primary" type="button" id="toggleImages">Gestisci immagini</button>
      </div>

      <section class="card shadow-sm is-hidden" id="adminCoursesSection">
        <div class="card-header">
          <h2 class="h5 mb-1">Corsi</h2>
          <p class="text-secondary mb-0">Crea o elimina corsi disponibili.</p>
        </div>
        <div class="grid">
          <label class="field">
            <span>Nuovo corso</span>
            <div class="inline-actions">
              <input id="adminCourseNew" class="form-control" type="text" placeholder="Fondamenti di Automatica" />
              <button id="adminAddCourse" class="btn btn-outline-primary" type="button">Crea</button>
            </div>
          </label>
        </div>
        <div id="adminCourseList" class="list-panel"></div>
      </section>

      <section class="card shadow-sm is-hidden" id="adminTopicsSection">
        <div class="card-header">
          <h2 class="h5 mb-1">Argomenti</h2>
          <p class="text-secondary mb-0">Gestisci gli argomenti per corso.</p>
        </div>
        <div class="grid">
          <label class="field">
            <span>Corso</span>
            <select id="adminTopicCourse" class="form-select"></select>
          </label>
          <label class="field">
            <span>Nuovo argomento</span>
            <div class="inline-actions">
              <input id="adminTopicNew" class="form-control" type="text" placeholder="stabilita" />
              <button id="adminAddTopic" class="btn btn-outline-primary" type="button">Crea</button>
            </div>
          </label>
        </div>
        <div id="adminTopicList" class="list-panel"></div>
      </section>

      <section class="card shadow-sm is-hidden" id="adminImagesSection">
        <div class="card-header">
          <h2 class="h5 mb-1">Banco immagini</h2>
          <p class="text-secondary mb-0">Carica e riusa immagini per corso.</p>
        </div>
        <div class="grid">
          <label class="field">
            <span>Corso</span>
            <select id="adminImageCourse" class="form-select"></select>
          </label>
          <label class="field">
            <span>Nome immagine</span>
            <input id="adminImageName" class="form-control" type="text" placeholder="Sistema in anello chiuso" />
          </label>
          <label class="field">
            <span>Descrizione (opzionale)</span>
            <input id="adminImageDescription" class="form-control" type="text" placeholder="schema di controllo" />
          </label>
          <label class="field">
            <span>File</span>
            <input id="adminImageFile" class="form-control" type="file" />
          </label>
        </div>
        <div class="actions">
          <button class="btn btn-outline-primary" id="adminUploadImage" type="button">Carica immagine</button>
        </div>
        <div class="text-secondary small mt-2" id="adminImageStatus"></div>
        <div id="adminImageList" class="image-bank"></div>
      </section>

      <section class="card shadow-sm">
        <div class="card-header">
          <h2 class="h5 mb-1">Domande</h2>
          <p class="text-secondary mb-0">Filtra il banco domande e gestisci duplicazioni.</p>
        </div>
        <div class="admin-question-block">
          <div class="admin-question-header">
            <h3 class="h6 mb-0">Nuova domanda</h3>
            <span class="chip is-hidden" id="adminEditBadge">In modifica</span>
          </div>
          <div class="grid">
            <label class="field">
              <span>Corso</span>
              <select id="adminQuestionCourse" class="form-select"></select>
            </label>
            <label class="field">
              <span>Tipo domanda</span>
              <select id="adminQuestionType" class="form-select">
                <option value="singola">Singola</option>
                <option value="multipla">Multipla</option>
              </select>
            </label>
            <label class="field">
              <span>Argomenti</span>
              <select id="adminQuestionTopics" class="form-select" multiple></select>
            </label>
            <label class="field">
              <span>Immagine (path)</span>
              <div class="inline-actions">
                <input id="adminQuestionImage" class="form-control" type="text" placeholder="figure/esempio.png" />
                <button class="btn btn-outline-secondary" id="adminPickImage" type="button">Seleziona</button>
              </div>
            </label>
          </div>
          <label class="field">
            <span>Testo domanda</span>
            <div class="preview-row">
              <textarea id="adminQuestionText" class="form-control" rows="4"></textarea>
              <div id="adminQuestionPreview" class="latex-preview-inline"></div>
            </div>
          </label>
          <div class="toolbar">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="adminQuestionImageLayout" />
              <label class="form-check-label" for="adminQuestionImageLayout">Layout con immagine</label>
            </div>
          </div>
          <div class="layout-fields is-hidden" id="adminQuestionLayoutFields">
            <label class="field">
              <span>Minipage sinistra</span>
              <input id="adminQuestionImageLeft" class="form-control" type="text" value="0.5\\linewidth" />
            </label>
            <label class="field">
              <span>Minipage destra</span>
              <input id="adminQuestionImageRight" class="form-control" type="text" value="0.5\\linewidth" />
            </label>
            <label class="field">
              <span>Width immagine</span>
              <input id="adminQuestionImageScale" class="form-control" type="text" value="0.96\\linewidth" />
            </label>
          </div>
          <div class="answers-builder">
            <div class="answers-title">Risposte</div>
            <div id="adminAnswers"></div>
            <button class="btn btn-outline-primary btn-sm" id="adminAddAnswer" type="button">Aggiungi risposta</button>
          </div>
          <div class="actions">
            <button class="btn btn-primary" id="adminSaveQuestion" type="button">Salva nel banco</button>
            <button class="btn btn-outline-secondary" id="adminResetQuestion" type="button">Reset</button>
          </div>
          <div class="text-secondary small mt-2" id="adminQuestionStatus"></div>
        </div>
        <div class="grid">
          <label class="field">
            <span>Corso</span>
            <select id="bankCourse" class="form-select"></select>
          </label>
          <label class="field">
            <span>Argomento</span>
            <select id="bankTopic" class="form-select"></select>
          </label>
          <label class="field">
            <span>Ricerca</span>
            <input id="bankSearch" class="form-control" type="text" placeholder="parola chiave" />
          </label>
        </div>
        <div class="actions">
          <button class="btn btn-outline-primary" id="refreshBank">Aggiorna elenco</button>
        </div>
        <div id="bankList" class="list-panel"></div>
      </section>
    </main>

    <footer class="footer">
      <p>Gestione catalogo domande, corsi e argomenti.</p>
    </footer>

    <div class="modal-backdrop is-hidden" id="imagePickerBackdrop"></div>
    <div class="modal-panel is-hidden" id="imagePickerModal" role="dialog" aria-modal="true" aria-labelledby="imagePickerTitle">
      <div class="modal-header">
        <h3 class="h5 mb-0" id="imagePickerTitle">Seleziona immagine</h3>
        <button class="btn btn-outline-secondary btn-sm" type="button" id="imagePickerClose">Chiudi</button>
      </div>
      <div class="modal-body">
        <div class="text-secondary small" id="imagePickerStatus"></div>
        <div id="imagePickerList" class="image-bank modal-bank"></div>
      </div>
    </div>

    <div class="modal-backdrop is-hidden" id="imagePreviewBackdrop"></div>
    <div class="modal-panel is-hidden" id="imagePreviewModal" role="dialog" aria-modal="true" aria-labelledby="imagePreviewTitle">
      <div class="modal-header">
        <h3 class="h5 mb-0" id="imagePreviewTitle">Anteprima immagine</h3>
        <button class="btn btn-outline-secondary btn-sm" type="button" id="imagePreviewClose">Chiudi</button>
      </div>
      <div class="modal-body">
        <div class="image-preview">
          <img id="imagePreviewImg" alt="" />
        </div>
        <div class="image-preview-meta" id="imagePreviewMeta"></div>
      </div>
    </div>

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/latex.js/dist/latex.min.js"
    ></script>
    <script defer src="admin.js?v=5"></script>
  </body>
</html>
